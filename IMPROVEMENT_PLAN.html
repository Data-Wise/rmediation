<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>RMediation Package Improvement Plan • RMediation</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" sizes="any" href="favicon.ico"><link rel="manifest" href="site.webmanifest"><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Inter-0.4.10/font.css" rel="stylesheet"><link href="deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="deps/Montserrat-0.4.10/font.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="RMediation Package Improvement Plan"><meta property="og:image" content="https://data-wise.github.io/rmediation/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">RMediation</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="index.html" aria-label="Home"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="articles/ci-methods-comparison.html">CI Methods Comparison</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/data-wise/rmediation" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.png" class="logo" alt=""><h1>RMediation Package Improvement Plan</h1>
      <small class="dont-index">Source: <a href="https://github.com/data-wise/rmediation/blob/main/IMPROVEMENT_PLAN.md" class="external-link"><code>IMPROVEMENT_PLAN.md</code></a></small>
    </div>

<div id="rmediation-package-improvement-plan" class="section level1">

<p><strong>Date</strong>: 2024-11-16 <strong>Version</strong>: 2.0.0 <strong>Analyst</strong>: Claude Code</p>
<hr><div class="section level2">
<h2 id="executive-summary">Executive Summary<a class="anchor" aria-label="anchor" href="#executive-summary"></a></h2>
<p>The RMediation package (1,531 lines across 23 R files after missingmed separation) provides solid statistical methods for mediation analysis confidence intervals. However, the codebase has accumulated technical debt through: - <strong>47 identified issues</strong> across code quality, organization, documentation, and testing - <strong>Critical bugs</strong> requiring immediate attention (logic errors, copy-paste mistakes) - <strong>No test infrastructure</strong> (highest risk) - <strong>Significant code duplication</strong> (maintenance burden)</p>
<p><strong>Recent Changes</strong>: - ✅ Separated missing data functionality into <code>missingmed</code> package - ✅ Removed <code>mice</code> dependency - ✅ Reduced from 26 to 23 R files</p>
<p>This plan provides a phased approach to modernization while maintaining backward compatibility, with a <strong>new recommendation to adopt S7 OOP</strong> for result objects.</p>
<hr></div>
<div class="section level2">
<h2 id="phase-1-critical-bug-fixes-week-1">Phase 1: Critical Bug Fixes (Week 1)<a class="anchor" aria-label="anchor" href="#phase-1-critical-bug-fixes-week-1"></a></h2>
<div class="section level3">
<h3 id="priority-critical---fix-before-any-release">Priority: CRITICAL - Fix Before Any Release<a class="anchor" aria-label="anchor" href="#priority-critical---fix-before-any-release"></a></h3>
<div class="section level4">
<h4 id="id_11-logic-error-in-is_valid_lav_syntaxr">1.1 Logic Error in is_valid_lav_syntax.R<a class="anchor" aria-label="anchor" href="#id_11-logic-error-in-is_valid_lav_syntaxr"></a></h4>
<p><strong>File</strong>: <code>R/lav_mice.R:53-55</code> <strong>Status</strong>: ✅ <strong>RESOLVED</strong> - Moved to missingmed package</p>
<p><strong>Issue</strong>: Negation error - stops on valid syntax instead of invalid <strong>Resolution</strong>: Function moved to <code>missingmed</code> package where it will be fixed <strong>Testing</strong>: Will be tested in missingmed package test suite</p>
<hr></div>
<div class="section level4">
<h4 id="id_12-error-message-bugs">1.2 Error Message Bugs<a class="anchor" aria-label="anchor" href="#id_12-error-message-bugs"></a></h4>
<p><strong>Files</strong>: <code>R/pMC.R:28-35</code>, <code>R/qMC.R:27-35</code></p>
<p><strong>Issue</strong>: Copy-paste errors in parameter names</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># pMC.R line 28 - WRONG:</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">missing</span>(q)) <span class="fu">stop</span>(<span class="fu">paste</span>(<span class="st">"argument"</span>, <span class="fu">sQuote</span>(<span class="st">"p"</span>), <span class="st">"must be specified"</span>))</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>                                               <span class="sc">^</span><span class="er">^^</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># Should reference "q"</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co"># Both files lines 32-35 - WRONG:</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.null</span>(q)) <span class="fu">stop</span>(<span class="fu">paste</span>(<span class="st">"argument"</span>, <span class="fu">sQuote</span>(<span class="st">"mu"</span>), <span class="st">"cannot be a NULL value"</span>))</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>                                               <span class="sc">^</span><span class="er">^^^</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co"># Should reference "q" or "p" respectively</span></span></code></pre></div>
<p><strong>Fix</strong>: Correct all parameter references in error messages <strong>Testing</strong>: Add parameter validation tests</p>
<hr></div>
<div class="section level4">
<h4 id="id_13-typos">1.3 Typos<a class="anchor" aria-label="anchor" href="#id_13-typos"></a></h4>
<p><strong>Files</strong>: <code>R/ci.R:94</code>, <code>R/mbco_semi.R:22</code></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># ci.R:94 - Fix typo:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">stop</span>(<span class="fu">paste</span>(<span class="st">"Please enter a ccorrect"</span>, ...))</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>                         <span class="sc">^</span><span class="er">^^^^^^^</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co"># Should be: "correct"</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co"># mbco_semi.R:22 - Fix comment:</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co"># Seubset of teh manifest variables</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  <span class="er">^^^^^^^</span>    <span class="er">^^^</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co"># Should be: "Subset of the"</span></span></code></pre></div>
<p><strong>Impact</strong>: Unprofessional error messages <strong>Testing</strong>: Automated spell check in CI/CD</p>
<hr></div>
</div>
</div>
<div class="section level2">
<h2 id="phase-2-test-infrastructure-week-2">Phase 2: Test Infrastructure (Week 2)<a class="anchor" aria-label="anchor" href="#phase-2-test-infrastructure-week-2"></a></h2>
<div class="section level3">
<h3 id="priority-high---foundation-for-all-improvements">Priority: HIGH - Foundation for All Improvements<a class="anchor" aria-label="anchor" href="#priority-high---foundation-for-all-improvements"></a></h3>
<div class="section level4">
<h4 id="id_21-create-test-framework">2.1 Create Test Framework<a class="anchor" aria-label="anchor" href="#id_21-create-test-framework"></a></h4>
<p><strong>Action</strong>: Initialize testthat infrastructure</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run in R console:</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_testthat</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>Creates</strong>: - <code>tests/testthat/</code> directory - <code>tests/testthat.R</code> file</p>
<hr></div>
<div class="section level4">
<h4 id="id_22-core-function-tests">2.2 Core Function Tests<a class="anchor" aria-label="anchor" href="#id_22-core-function-tests"></a></h4>
<p><strong>Files to create</strong>:</p>
<ol style="list-style-type: decimal"><li>
<code>tests/testthat/test-medci.R</code> - Test medci() with known results
<ul><li>Test against MacKinnon et al. (2007) published examples</li>
<li>Test all type options: “dop”, “mc”, “asymp”, “all”</li>
<li>Test rho parameter variations</li>
<li>Test plot functionality</li>
</ul></li>
<li>
<code>tests/testthat/test-ci.R</code> - Test ci() function
<ul><li>Test with coefficient vectors</li>
<li>Test with lavaan objects</li>
<li>Test formula interface (~b1<em>b2</em>b3)</li>
<li>Test error handling for invalid inputs</li>
</ul></li>
<li>
<code>tests/testthat/test-product-dist.R</code> - Test pprodnormal/qprodnormal
<ul><li>Test consistency: qprodnormal(pprodnormal(x)) ≈ x</li>
<li>Test against known quantiles</li>
<li>Test MC vs Meeker convergence</li>
</ul></li>
<li>
<code>tests/testthat/test-mbco.R</code> - Test MBCO methods
<ul><li>Test asymp, parametric, semi methods</li>
<li>Test with simple OpenMx models</li>
<li>Verify chi-square statistics</li>
</ul></li>
<li>
<code>tests/testthat/test-validation.R</code> - Input validation
<ul><li>Test parameter bounds (alpha ∈ (0,1), rho ∈ (-1,1))</li>
<li>Test dimension matching (mu vs Sigma)</li>
<li>Test type parameter matching</li>
<li>Test NA/Inf/NaN handling</li>
</ul></li>
<li>
<code>tests/testthat/test-missing-data.R</code> - Test lav_mice/mx_mice
<ul><li>Test with mice::mids objects</li>
<li>Test lavaan model fitting</li>
<li>Test OpenMx model fitting</li>
</ul></li>
</ol><hr></div>
<div class="section level4">
<h4 id="id_23-coverage-goals">2.3 Coverage Goals<a class="anchor" aria-label="anchor" href="#id_23-coverage-goals"></a></h4>
<p><strong>Minimum Acceptable</strong>: 70% code coverage <strong>Target</strong>: 85% code coverage</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check coverage:</span></span>
<span><span class="fu">covr</span><span class="fu">::</span><span class="fu">package_coverage</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">covr</span><span class="fu">::</span><span class="fu">report</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<hr></div>
</div>
</div>
<div class="section level2">
<h2 id="phase-3-code-refactoring-weeks-3-4">Phase 3: Code Refactoring (Weeks 3-4)<a class="anchor" aria-label="anchor" href="#phase-3-code-refactoring-weeks-3-4"></a></h2>
<div class="section level3">
<h3 id="priority-high---reduce-technical-debt">Priority: HIGH - Reduce Technical Debt<a class="anchor" aria-label="anchor" href="#priority-high---reduce-technical-debt"></a></h3>
<div class="section level4">
<h4 id="id_31-extract-validation-utilities">3.1 Extract Validation Utilities<a class="anchor" aria-label="anchor" href="#id_31-extract-validation-utilities"></a></h4>
<p><strong>New file</strong>: <code>R/utils_validation.R</code></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Validate CI Method Type</span></span>
<span><span class="co">#' @keywords internal</span></span>
<span><span class="va">validate_ci_type</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">type</span>, <span class="va">allowed</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dop"</span>, <span class="st">"mc"</span>, <span class="st">"asymp"</span>, <span class="st">"all"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">type</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">type</span><span class="op">)</span>  <span class="co"># Normalize case</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/match.arg.html" class="external-link">match.arg</a></span><span class="op">(</span><span class="va">type</span>, <span class="va">allowed</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' Validate Significance Level</span></span>
<span><span class="co">#' @keywords internal</span></span>
<span><span class="va">validate_alpha</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">alpha</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">is.numeric</a></span><span class="op">(</span><span class="va">alpha</span><span class="op">)</span> <span class="op">||</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">alpha</span><span class="op">)</span> <span class="op">!=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"'alpha' must be a single numeric value"</span>, call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">alpha</span> <span class="op">&lt;=</span> <span class="fl">0</span> <span class="op">||</span> <span class="va">alpha</span> <span class="op">&gt;=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"'alpha' must be between 0 and 1"</span>, call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="va">alpha</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' Validate Correlation Parameter</span></span>
<span><span class="co">#' @keywords internal</span></span>
<span><span class="va">validate_rho</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rho</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">is.numeric</a></span><span class="op">(</span><span class="va">rho</span><span class="op">)</span> <span class="op">||</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">rho</span><span class="op">)</span> <span class="op">!=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"'rho' must be a single numeric value"</span>, call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">rho</span> <span class="op">&lt;=</span> <span class="op">-</span><span class="fl">1</span> <span class="op">||</span> <span class="va">rho</span> <span class="op">&gt;=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"'rho' must be between -1 and 1"</span>, call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="va">rho</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' Ensure Covariance Matrix</span></span>
<span><span class="co">#' @keywords internal</span></span>
<span><span class="va">ensure_covariance_matrix</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">Sigma</span>, <span class="va">mu</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">is.matrix</a></span><span class="op">(</span><span class="va">Sigma</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">expected_len</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">mu</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">mu</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Sigma</span><span class="op">)</span> <span class="op">!=</span> <span class="va">expected_len</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span></span>
<span>        <span class="st">"'Sigma' has length %d but should have length %d for %d parameters"</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Sigma</span><span class="op">)</span>, <span class="va">expected_len</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">mu</span><span class="op">)</span></span>
<span>      <span class="op">)</span>, call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="va">Sigma</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/lav_matrix.html" class="external-link">lav_matrix_vech_reverse</a></span><span class="op">(</span><span class="va">Sigma</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">Sigma</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Updates required</strong>: - <code>R/medci.R</code>: Use validate_ci_type(), validate_alpha(), validate_rho() - <code>R/ci.R</code>: Use validate_ci_type(), validate_alpha(), ensure_covariance_matrix() - <code>R/pMC.R</code>, <code>R/qMC.R</code>: Use ensure_covariance_matrix() - <code>R/confintMC.R</code>, <code>R/confintAsymp.R</code>: Use ensure_covariance_matrix()</p>
<hr></div>
<div class="section level4">
<h4 id="id_32-extract-plotting-utilities">3.2 Extract Plotting Utilities<a class="anchor" aria-label="anchor" href="#id_32-extract-plotting-utilities"></a></h4>
<p><strong>New file</strong>: <code>R/utils_plotting.R</code></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Set Up Plot Margins for CI Plots</span></span>
<span><span class="co">#' @keywords internal</span></span>
<span><span class="va">setup_ci_plot_margins</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">op</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">4</span>, <span class="fl">7</span>, <span class="fl">4</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.1</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span>, ask <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="va">op</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' Plot Density with CI Overlay</span></span>
<span><span class="co">#' @keywords internal</span></span>
<span><span class="va">plot_density_with_ci</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">samples</span>, <span class="va">ci_lower</span>, <span class="va">ci_upper</span>,</span>
<span>                                  <span class="va">estimate</span>, <span class="va">se</span>, <span class="va">method</span> <span class="op">=</span> <span class="st">"MC"</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Implementation extracted from confintMC.R lines 63-136</span></span>
<span>  <span class="co"># Cleaner, modular plotting logic</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' Add CI Error Bars to Plot</span></span>
<span><span class="co">#' @keywords internal</span></span>
<span><span class="va">add_ci_errorbars</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">ci_lower</span>, <span class="va">ci_upper</span>, <span class="va">estimate</span>, <span class="va">y_position</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Implementation for overlaying CI bars</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Updates required</strong>: - <code>R/confintMC.R</code>: Extract lines 63-136 to use plot utilities - <code>R/confintAsymp.R</code>: Extract lines 19-88 to use plot utilities - <code>R/medci.R</code>: Extract lines 120-152 to use plot utilities</p>
<hr></div>
<div class="section level4">
<h4 id="id_33-consolidate-product-distribution-functions">3.3 Consolidate Product Distribution Functions<a class="anchor" aria-label="anchor" href="#id_33-consolidate-product-distribution-functions"></a></h4>
<p><strong>Action</strong>: Merge related files</p>
<p><strong>Option A - Keep Separate (Current Structure)</strong>: - Maintain 6 separate files for modularity</p>
<p><strong>Option B - Consolidate (Recommended)</strong>:</p>
<p>Merge into 2 files: 1. <code>R/product_distribution_cdf.R</code>: - pprodnormal() - pprodnormalMeeker() - pprodnormalMC()</p>
<ol start="2" style="list-style-type: decimal"><li>
<code>R/product_distribution_quantile.R</code>:
<ul><li>qprodnormal()</li>
<li>qprodnormalMeeker()</li>
<li>qprodnormalMC()</li>
</ul></li>
</ol><p><strong>Benefits</strong>: - Easier to maintain related functions together - Reduces file count from 6 → 2 - All CDF logic in one place, all quantile logic in one place</p>
<hr></div>
<div class="section level4">
<h4 id="id_34-standardize-monte-carlo-sample-sizes">3.4 Standardize Monte Carlo Sample Sizes<a class="anchor" aria-label="anchor" href="#id_34-standardize-monte-carlo-sample-sizes"></a></h4>
<p><strong>New file</strong>: <code>R/constants.R</code></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Default Monte Carlo Sample Sizes</span></span>
<span><span class="co">#' @name mc_defaults</span></span>
<span><span class="co">#' @keywords internal</span></span>
<span><span class="cn">NULL</span></span>
<span></span>
<span><span class="co">#' @rdname mc_defaults</span></span>
<span><span class="va">MC_SAMPLE_SIZE_SMALL</span> <span class="op">&lt;-</span> <span class="fl">1e5</span>   <span class="co"># For quick approximations</span></span>
<span></span>
<span><span class="co">#' @rdname mc_defaults</span></span>
<span><span class="va">MC_SAMPLE_SIZE_MEDIUM</span> <span class="op">&lt;-</span> <span class="fl">1e6</span>  <span class="co"># Default for ci()</span></span>
<span></span>
<span><span class="co">#' @rdname mc_defaults</span></span>
<span><span class="va">MC_SAMPLE_SIZE_LARGE</span> <span class="op">&lt;-</span> <span class="fl">1e7</span>   <span class="co"># For high-precision needs</span></span>
<span></span>
<span><span class="co">#' @rdname mc_defaults</span></span>
<span><span class="va">MC_DEFAULT_SIZE</span> <span class="op">&lt;-</span> <span class="va">MC_SAMPLE_SIZE_MEDIUM</span></span></code></pre></div>
<p><strong>Updates required</strong>: - <code>R/medci.R:92</code>: Change <code>n.mc=1e5</code> to <code>n.mc=MC_DEFAULT_SIZE</code> - <code>R/ci.R:91</code>: Change <code>n.mc=1e6</code> to <code>n.mc=MC_DEFAULT_SIZE</code> - <code>R/medciMC.R:2</code>: Document why 1e7 is used (high precision) - All MC functions: Use named constants</p>
<p><strong>Rationale</strong>: Document and centralize choices, easy to adjust globally</p>
<hr></div>
<div class="section level4">
<h4 id="id_35-extract-standard-error-calculation">3.5 Extract Standard Error Calculation<a class="anchor" aria-label="anchor" href="#id_35-extract-standard-error-calculation"></a></h4>
<p><strong>New file</strong>: <code>R/utils_statistics.R</code></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Compute Standard Error of Product of Two Normals</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' Uses Craig (1936) formula for SE(ab)</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @param mu.a Mean of a</span></span>
<span><span class="co">#' @param mu.b Mean of b</span></span>
<span><span class="co">#' @param se.a Standard error of a</span></span>
<span><span class="co">#' @param se.b Standard error of b</span></span>
<span><span class="co">#' @param rho Correlation between a and b</span></span>
<span><span class="co">#' @return Standard error of the product</span></span>
<span><span class="co">#' @keywords internal</span></span>
<span><span class="va">se_product</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">mu.a</span>, <span class="va">mu.b</span>, <span class="va">se.a</span>, <span class="va">se.b</span>, <span class="va">rho</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span></span>
<span>    <span class="va">se.b</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="va">mu.a</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span></span>
<span>    <span class="va">se.a</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="va">mu.b</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span></span>
<span>    <span class="fl">2</span> <span class="op">*</span> <span class="va">mu.a</span> <span class="op">*</span> <span class="va">mu.b</span> <span class="op">*</span> <span class="va">rho</span> <span class="op">*</span> <span class="va">se.a</span> <span class="op">*</span> <span class="va">se.b</span> <span class="op">+</span></span>
<span>    <span class="va">se.a</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="va">se.b</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span></span>
<span>    <span class="va">se.a</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="va">se.b</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="va">rho</span><span class="op">^</span><span class="fl">2</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' Compute Indirect Effect Estimate</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' Computes ab + rho*SE(a)*SE(b)</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @inheritParams se_product</span></span>
<span><span class="co">#' @return Point estimate of indirect effect</span></span>
<span><span class="co">#' @keywords internal</span></span>
<span><span class="va">estimate_indirect</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">mu.a</span>, <span class="va">mu.b</span>, <span class="va">se.a</span>, <span class="va">se.b</span>, <span class="va">rho</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">mu.a</span> <span class="op">*</span> <span class="va">mu.b</span> <span class="op">+</span> <span class="va">rho</span> <span class="op">*</span> <span class="va">se.a</span> <span class="op">*</span> <span class="va">se.b</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Updates required</strong>: - <code>R/medciMeeker.R:8</code>: Use se_product() - <code>R/medciAsymp.R:6</code>: Use se_product() - <code>R/medci.R:128</code>: Use se_product() - All functions computing SE(ab): Use centralized function</p>
<hr></div>
</div>
</div>
<div class="section level2">
<h2 id="phase-4-documentation-enhancement-week-5">Phase 4: Documentation Enhancement (Week 5)<a class="anchor" aria-label="anchor" href="#phase-4-documentation-enhancement-week-5"></a></h2>
<div class="section level3">
<h3 id="priority-high---improve-user-experience">Priority: HIGH - Improve User Experience<a class="anchor" aria-label="anchor" href="#priority-high---improve-user-experience"></a></h3>
<div class="section level4">
<h4 id="id_41-add-roxygen-documentation-to-internal-functions">4.1 Add Roxygen Documentation to Internal Functions<a class="anchor" aria-label="anchor" href="#id_41-add-roxygen-documentation-to-internal-functions"></a></h4>
<p><strong>Files needing roxygen2 headers</strong>:</p>
<ol style="list-style-type: decimal"><li>
<code>R/confintMC.R</code> - Add:</li>
</ol><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Monte Carlo Confidence Intervals (Internal)</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' Internal function for computing Monte Carlo confidence intervals.</span></span>
<span><span class="co">#' Called by ci() and medci().</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @inheritParams ci</span></span>
<span><span class="co">#' @return List with CI, Estimate, SE, MC.Error</span></span>
<span><span class="co">#' @keywords internal</span></span>
<span><span class="co">#' @noRd</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal"><li>Similarly for:
<ul><li><code>R/confintAsymp.R</code></li>
<li><code>R/medciMeeker.R</code></li>
<li><code>R/medciMC.R</code></li>
<li><code>R/medciAsymp.R</code></li>
<li><code>R/pprodnormalMeeker.R</code></li>
<li><code>R/pprodnormalMC.R</code></li>
<li><code>R/qprodnormalMeeker.R</code></li>
<li><code>R/qprodnormalMC.R</code></li>
<li><code>R/mbco_asymp.R</code></li>
<li><code>R/mbco_parametric.R</code></li>
<li><code>R/mbco_semi.R</code></li>
</ul></li>
</ol><hr></div>
<div class="section level4">
<h4 id="id_42-create-vignettes">4.2 Create Vignettes<a class="anchor" aria-label="anchor" href="#id_42-create-vignettes"></a></h4>
<p><strong>Vignette 1</strong>: <code>vignettes/quickstart.Rmd</code></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Getting Started with RMediation"</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> rmarkdown::html_vignette</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="fu">vignette</span><span class="kw">: </span><span class="ch">&gt;</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  %\VignetteIndexEntry{Getting Started with RMediation}</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  %\VignetteEngine{knitr::rmarkdown}</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>  %\VignetteEncoding{UTF-8}</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>Content: - What is mediation analysis? - Simple example with medci() - Interpreting results - Choosing CI method</p>
<p><strong>Vignette 2</strong>: <code>vignettes/ci-methods.Rmd</code></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Confidence Interval Methods Comparison"</span></span></code></pre></div>
<p>Content: - Distribution of Product (DOP/Meeker) - Monte Carlo (MC) - Asymptotic (Delta method) - When to use each method - Computational cost vs accuracy trade-offs - Visual comparison</p>
<p><strong>Vignette 3</strong>: <code>vignettes/complex-mediation.Rmd</code></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Complex Mediation Models with ci()"</span></span></code></pre></div>
<p>Content: - Multiple mediators - Serial mediation - Moderated mediation - Formula interface (~b1<em>b2</em>b3) - Integration with lavaan</p>
<p><strong>Vignette 4</strong>: <code>vignettes/missing-data.Rmd</code></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Mediation Analysis with Missing Data"</span></span></code></pre></div>
<p>Content: - Using lav_mice() and mx_mice() - Integration with mice package - Note about missingmed package for more advanced features</p>
<p><strong>Vignette 5</strong>: <code>vignettes/mbco-tests.Rmd</code></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Model-Based Constrained Optimization Tests"</span></span></code></pre></div>
<p>Content: - What is MBCO? - Asymptotic vs parametric vs semiparametric - OpenMx model specification - Hypothesis testing for indirect effects</p>
<hr></div>
<div class="section level4">
<h4 id="id_43-enhance-function-documentation">4.3 Enhance Function Documentation<a class="anchor" aria-label="anchor" href="#id_43-enhance-function-documentation"></a></h4>
<p><strong>Add @details sections</strong> explaining:</p>
<ol style="list-style-type: decimal"><li>
<strong>medci()</strong> - Add guidance on method selection:</li>
</ol><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @details</span></span>
<span><span class="co">#' ## Method Selection</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' **Distribution of Product (DOP, default)**: Uses exact distribution theory</span></span>
<span><span class="co">#' via Meeker &amp; Escobar (1994) algorithm. Most accurate for small samples but</span></span>
<span><span class="co">#' computationally intensive. Recommended unless speed is critical.</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' **Monte Carlo (MC)**: Generates samples from bivariate normal distribution</span></span>
<span><span class="co">#' and computes empirical quantiles. Accuracy increases with n.mc. Good balance</span></span>
<span><span class="co">#' of speed and accuracy.</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' **Asymptotic (Sobel test)**: Uses delta method approximation. Fast but often</span></span>
<span><span class="co">#' underestimates CI width. Not recommended for inference, use for quick checks only.</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' ## Sample Size Recommendations</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' For n.mc in Monte Carlo method:</span></span>
<span><span class="co">#' - Quick check: 1e4 (10,000)</span></span>
<span><span class="co">#' - Standard use: 1e5 (100,000, default)</span></span>
<span><span class="co">#' - High precision: 1e6 - 1e7 (1-10 million)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal"><li>
<strong>ci()</strong> - Add formula interface examples:</li>
</ol><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @examples</span></span>
<span><span class="co">#' # Three-path indirect effect</span></span>
<span><span class="co">#' ci(mu = c(a=0.3, b=0.4, c=0.5),</span></span>
<span><span class="co">#'    Sigma = diag(0.01, 3),</span></span>
<span><span class="co">#'    quant = ~a*b*c)</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' # Complex function of parameters</span></span>
<span><span class="co">#' ci(mu = c(a1=0.3, b1=0.4, a2=0.2, b2=0.5),</span></span>
<span><span class="co">#'    Sigma = diag(0.01, 4),</span></span>
<span><span class="co">#'    quant = ~(a1*b1) + (a2*b2))  # Total indirect effect</span></span></code></pre></div>
<hr></div>
<div class="section level4">
<h4 id="id_44-add-method-selection-decision-tree">4.4 Add Method Selection Decision Tree<a class="anchor" aria-label="anchor" href="#id_44-add-method-selection-decision-tree"></a></h4>
<p><strong>New documentation file</strong>: <code>man/method-selection.Rd</code></p>
<pre><code>\name{method-selection}
\alias{method-selection}
\title{Choosing a CI Method in RMediation}
\description{
Decision guide for selecting confidence interval methods
}
\details{
Use this decision tree:

1. Do you need exact inference (e.g., for publication)?
   → YES: Use method="dop" (distribution of product)
   → NO: Continue to #2

2. Is speed critical (e.g., simulation study with 1000+ replications)?
   → YES: Use method="asymp" (asymptotic/Sobel)
   → NO: Continue to #3

3. Do you have complex functions (3+ paths)?
   → YES: Use method="mc" with ci()
   → NO: Use method="dop" for best accuracy

4. Sample size considerations:
   - n &lt; 50: Prefer "dop" (asymptotic assumptions questionable)
   - 50 ≤ n &lt; 200: "dop" or "mc" with high n.mc
   - n ≥ 200: Any method acceptable, "asymp" often sufficient

5. Effect size considerations:
   - Indirect effect near zero: Prefer "dop" or "mc"
   - CI highly asymmetric: Avoid "asymp"
}
\seealso{
\code{\link{medci}}, \code{\link{ci}}
}</code></pre>
<hr></div>
</div>
</div>
<div class="section level2">
<h2 id="phase-5-dependency-optimization-week-6">Phase 5: Dependency Optimization (Week 6)<a class="anchor" aria-label="anchor" href="#phase-5-dependency-optimization-week-6"></a></h2>
<div class="section level3">
<h3 id="priority-medium---reduce-package-footprint">Priority: MEDIUM - Reduce Package Footprint<a class="anchor" aria-label="anchor" href="#priority-medium---reduce-package-footprint"></a></h3>
<div class="section level4">
<h4 id="id_51-move-heavy-dependencies-to-suggests">5.1 Move Heavy Dependencies to Suggests<a class="anchor" aria-label="anchor" href="#id_51-move-heavy-dependencies-to-suggests"></a></h4>
<p><strong>Current DESCRIPTION Imports</strong>:</p>
<pre><code>Imports:
    OpenMx (&gt;= 2.13),     # 50+ MB, only used in mbco_*
    lavaan (&gt;= 0.6-0),    # Only used in ci() for lavaan objects
    mice (&gt;= 3.8.0),      # Only used in lav_mice/mx_mice</code></pre>
<p><strong>Proposed DESCRIPTION</strong>:</p>
<pre><code>Imports:
    graphics (&gt;= 3.5.0),
    grDevices (&gt;= 3.5),
    methods (&gt;= 3.5.0),
    stats (&gt;= 3.5.0),
    MASS (&gt;= 7.3)

Suggests:
    OpenMx (&gt;= 2.13),
    lavaan (&gt;= 0.6-0),
    mice (&gt;= 3.8.0),
    e1071 (&gt;= 1.6-7),
    modelr (&gt;= 0.1.8),
    testthat (&gt;= 3.0.0),
    covr,
    knitr,
    rmarkdown</code></pre>
<p><strong>Code changes required</strong>:</p>
<ol style="list-style-type: decimal"><li>Add conditional checks:</li>
</ol><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># At top of mbco.R:</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"OpenMx"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Package 'OpenMx' is required for mbco(). Install with:\n  install.packages('OpenMx')"</span>,</span>
<span>       call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># At top of ci.R lavaan section:</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">mu</span>, <span class="st">"lavaan"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"lavaan"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Package 'lavaan' is required to use lavaan objects. Install with:\n  install.packages('lavaan')"</span>,</span>
<span>         call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="co"># Existing lavaan code...</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># At top of lav_mice.R and mx_mice.R:</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"mice"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Package 'mice' is required. Install with:\n  install.packages('mice')"</span>,</span>
<span>       call. <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal"><li>Update package documentation to note optional dependencies</li>
</ol><hr></div>
<div class="section level4">
<h4 id="id_52-remove-unused-dependencies">5.2 Remove Unused Dependencies<a class="anchor" aria-label="anchor" href="#id_52-remove-unused-dependencies"></a></h4>
<p><strong>Action</strong>: Remove from DESCRIPTION: - <code>boot</code> - Never actually used in code (only in commented example) - <code>generics</code> - Can use base::tidy generic instead</p>
<hr></div>
</div>
</div>
<div class="section level2">
<h2 id="phase-6-s7-oop-adoption-weeks-7-8">Phase 6: S7 OOP Adoption (Weeks 7-8)<a class="anchor" aria-label="anchor" href="#phase-6-s7-oop-adoption-weeks-7-8"></a></h2>
<div class="section level3">
<h3 id="priority-medium-high---recommended-based-on-analysis">Priority: <strong>MEDIUM-HIGH</strong> - Recommended Based on Analysis<a class="anchor" aria-label="anchor" href="#priority-medium-high---recommended-based-on-analysis"></a></h3>
<p><strong>Rationale</strong>: After comprehensive analysis, S7 adoption for result objects provides significant UX improvements with minimal risk and effort (~2 weeks). See detailed S7 analysis document for full justification.</p>
<div class="section level4">
<h4 id="id_61-create-s7-class-hierarchy">6.1 Create S7 Class Hierarchy<a class="anchor" aria-label="anchor" href="#id_61-create-s7-class-hierarchy"></a></h4>
<p><strong>New file</strong>: <code>R/s7_classes.R</code></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rconsortium.github.io/S7/" class="external-link">S7</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Base class for all CI results</span></span>
<span><span class="va">ConfidenceInterval</span> <span class="op">&lt;-</span> <span class="fu">new_class</span><span class="op">(</span></span>
<span>  <span class="st">"ConfidenceInterval"</span>,</span>
<span>  properties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    ci <span class="op">=</span> <span class="va">class_double</span>,</span>
<span>    estimate <span class="op">=</span> <span class="va">class_double</span>,</span>
<span>    se <span class="op">=</span> <span class="va">class_double</span>,</span>
<span>    mc_error <span class="op">=</span> <span class="va">class_double</span> <span class="op">|</span> <span class="cn">NULL</span>,</span>
<span>    method <span class="op">=</span> <span class="va">class_character</span>,</span>
<span>    alpha <span class="op">=</span> <span class="va">class_numeric</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subclass for medci() results</span></span>
<span><span class="va">MediationCI</span> <span class="op">&lt;-</span> <span class="fu">new_class</span><span class="op">(</span></span>
<span>  <span class="st">"MediationCI"</span>,</span>
<span>  parent <span class="op">=</span> <span class="va">ConfidenceInterval</span>,</span>
<span>  properties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    mu_x <span class="op">=</span> <span class="va">class_double</span>,</span>
<span>    mu_y <span class="op">=</span> <span class="va">class_double</span>,</span>
<span>    se_x <span class="op">=</span> <span class="va">class_double</span>,</span>
<span>    se_y <span class="op">=</span> <span class="va">class_double</span>,</span>
<span>    rho <span class="op">=</span> <span class="va">class_double</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subclass for ci() results</span></span>
<span><span class="va">GeneralCI</span> <span class="op">&lt;-</span> <span class="fu">new_class</span><span class="op">(</span></span>
<span>  <span class="st">"GeneralCI"</span>,</span>
<span>  parent <span class="op">=</span> <span class="va">ConfidenceInterval</span>,</span>
<span>  properties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    quant <span class="op">=</span> <span class="va">class_formula</span>,</span>
<span>    parameters <span class="op">=</span> <span class="va">class_character</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Class for MBCO test results</span></span>
<span><span class="va">MBCOTest</span> <span class="op">&lt;-</span> <span class="fu">new_class</span><span class="op">(</span></span>
<span>  <span class="st">"MBCOTest"</span>,</span>
<span>  properties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    chisq <span class="op">=</span> <span class="va">class_double</span>,</span>
<span>    df <span class="op">=</span> <span class="va">class_double</span>,</span>
<span>    p_value <span class="op">=</span> <span class="va">class_double</span>,</span>
<span>    method <span class="op">=</span> <span class="va">class_character</span>,</span>
<span>    alpha <span class="op">=</span> <span class="va">class_numeric</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Key Benefits</strong>: - Type-safe result objects - Professional <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> output - Backward compatible via <code>[</code>, <code>[[</code>, <code>$</code> methods - Enables future enhancements (ggplot2 integration)</p>
<hr></div>
<div class="section level4">
<h4 id="id_62-implement-print-methods">6.2 Implement Print Methods<a class="anchor" aria-label="anchor" href="#id_62-implement-print-methods"></a></h4>
<p><strong>New file</strong>: <code>R/s7_methods_print.R</code></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">method</span><span class="op">(</span><span class="va">print</span>, <span class="va">MediationCI</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">digits</span> <span class="op">=</span> <span class="fl">4</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Mediation Analysis: Confidence Interval for Indirect Effect\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strrep.html" class="external-link">strrep</a></span><span class="op">(</span><span class="st">"="</span>, <span class="fl">60</span><span class="op">)</span>, <span class="st">"\n\n"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Method:      "</span>, <span class="va">x</span><span class="op">@</span><span class="va">method</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Parameters:\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  mu.x ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">mu_x</span>, <span class="va">digits</span><span class="op">)</span>, <span class="st">",  se.x ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">se_x</span>, <span class="va">digits</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  mu.y ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">mu_y</span>, <span class="va">digits</span><span class="op">)</span>, <span class="st">",  se.y ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">se_y</span>, <span class="va">digits</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  rho ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">rho</span>, <span class="va">digits</span><span class="op">)</span>, <span class="st">"\n\n"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Estimate:    "</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">estimate</span>, <span class="va">digits</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Std. Error:  "</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">se</span>, <span class="va">digits</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">ci_level</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">x</span><span class="op">@</span><span class="va">alpha</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%d%% CI:      [%s, %s]\n"</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ci_level</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">ci</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">digits</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">ci</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="va">digits</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">mc_error</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"MC Error:    "</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">mc_error</span>, <span class="va">digits</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># Interpretation</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nInterpretation:\n"</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">ci</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">&amp;&amp;</span> <span class="va">x</span><span class="op">@</span><span class="va">ci</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  The indirect effect is not statistically significant\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  (CI includes zero at"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%g%%"</span>, <span class="va">ci_level</span><span class="op">)</span>, <span class="st">"level).\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">direction</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">ci</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="st">"positive"</span> <span class="kw">else</span> <span class="st">"negative"</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  The indirect effect is statistically significant and"</span>, <span class="va">direction</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  (CI excludes zero at"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%g%%"</span>, <span class="va">ci_level</span><span class="op">)</span>, <span class="st">"level).\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">method</span><span class="op">(</span><span class="va">print</span>, <span class="va">MBCOTest</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">digits</span> <span class="op">=</span> <span class="fl">4</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Model-Based Constrained Optimization Test\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strrep.html" class="external-link">strrep</a></span><span class="op">(</span><span class="st">"="</span>, <span class="fl">50</span><span class="op">)</span>, <span class="st">"\n\n"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Method:       "</span>, <span class="va">x</span><span class="op">@</span><span class="va">method</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Chi-squared:  "</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">chisq</span>, <span class="va">digits</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"df:           "</span>, <span class="va">x</span><span class="op">@</span><span class="va">df</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"p-value:      "</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.pval.html" class="external-link">format.pval</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">p_value</span>, <span class="va">digits</span><span class="op">)</span>, <span class="st">"\n\n"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">p_value</span> <span class="op">&lt;</span> <span class="va">x</span><span class="op">@</span><span class="va">alpha</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Result: Reject H0 (p &lt;"</span>, <span class="va">x</span><span class="op">@</span><span class="va">alpha</span>, <span class="st">")\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Result: Fail to reject H0 (p &gt;="</span>, <span class="va">x</span><span class="op">@</span><span class="va">alpha</span>, <span class="st">")\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Impact</strong>: Users get formatted, interpretable output automatically</p>
<hr></div>
<div class="section level4">
<h4 id="id_63-implement-backward-compatibility-methods">6.3 Implement Backward Compatibility Methods<a class="anchor" aria-label="anchor" href="#id_63-implement-backward-compatibility-methods"></a></h4>
<p><strong>New file</strong>: <code>R/s7_methods_compat.R</code></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Allow [ and [[ access like lists</span></span>
<span><span class="fu">method</span><span class="op">(</span><span class="va">`[`</span>, <span class="va">ConfidenceInterval</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">i</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">method</span><span class="op">(</span><span class="va">`[[`</span>, <span class="va">ConfidenceInterval</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">i</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Allow $ access</span></span>
<span><span class="fu">method</span><span class="op">(</span><span class="va">`$`</span>, <span class="va">ConfidenceInterval</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># names() method for legacy code</span></span>
<span><span class="fu">method</span><span class="op">(</span><span class="va">names</span>, <span class="va">ConfidenceInterval</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Convert to list for backward compatibility</span></span>
<span><span class="fu">method</span><span class="op">(</span><span class="va">as.list</span>, <span class="va">ConfidenceInterval</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ci_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%d%% CI"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">x</span><span class="op">@</span><span class="va">alpha</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">lst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">ci</span><span class="op">)</span>,</span>
<span>    <span class="va">x</span><span class="op">@</span><span class="va">estimate</span>,</span>
<span>    <span class="va">x</span><span class="op">@</span><span class="va">se</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">lst</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">ci_name</span>, <span class="st">"Estimate"</span>, <span class="st">"SE"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">mc_error</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">lst</span><span class="op">$</span><span class="va">`MC Error`</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">@</span><span class="va">mc_error</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="va">lst</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">method</span><span class="op">(</span><span class="va">as.list</span>, <span class="va">MBCOTest</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    chisq <span class="op">=</span> <span class="va">x</span><span class="op">@</span><span class="va">chisq</span>,</span>
<span>    df <span class="op">=</span> <span class="va">x</span><span class="op">@</span><span class="va">df</span>,</span>
<span>    p <span class="op">=</span> <span class="va">x</span><span class="op">@</span><span class="va">p_value</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Result</strong>: Old code like <code>res$Estimate</code> and <code>res[["95% CI"]]</code> continues to work!</p>
<hr></div>
<div class="section level4">
<h4 id="id_64-refactor-plot-methods-optional">6.4 Refactor Plot Methods (Optional)<a class="anchor" aria-label="anchor" href="#id_64-refactor-plot-methods-optional"></a></h4>
<p>Decouple plotting from computation:</p>
<p><strong>Current</strong>: <code>medci(..., plot=TRUE, plotCI=TRUE)</code> <strong>Proposed</strong>: <code>res &lt;- medci(...); plot(res)</code></p>
<p><strong>Benefits</strong>: - No recomputation needed to replot - Can customize plots after computation - Follows R conventions</p>
<p><strong>Implementation</strong>: Low priority - can be done in future release</p>
<hr></div>
</div>
</div>
<div class="section level2">
<h2 id="phase-7-integration-and-release-week-9">Phase 7: Integration and Release (Week 9)<a class="anchor" aria-label="anchor" href="#phase-7-integration-and-release-week-9"></a></h2>
<div class="section level3">
<h3 id="priority-critical---ensure-quality">Priority: CRITICAL - Ensure Quality<a class="anchor" aria-label="anchor" href="#priority-critical---ensure-quality"></a></h3>
<div class="section level4">
<h4 id="id_71-pre-release-checklist">7.1 Pre-Release Checklist<a class="anchor" aria-label="anchor" href="#id_71-pre-release-checklist"></a></h4>
<ul class="task-list"><li><label><input type="checkbox">All critical bugs fixed (Phase 1)</label></li>
<li><label><input type="checkbox">Test coverage ≥ 70% (Phase 2)</label></li>
<li><label><input type="checkbox">All refactoring complete (Phase 3)</label></li>
<li><label><input type="checkbox">Vignettes created (Phase 4)</label></li>
<li><label><input type="checkbox">Documentation complete (Phase 4)</label></li>
<li><label><input type="checkbox">Dependencies optimized (Phase 5)</label></li>
<li><label><input type="checkbox"><code>R CMD check</code> passes with 0 errors, 0 warnings</label></li>
<li><label><input type="checkbox"><code>devtools::check()</code> passes</label></li>
<li><label><input type="checkbox">All examples run successfully</label></li>
<li><label><input type="checkbox">Version number bumped appropriately</label></li>
<li><label><input type="checkbox">NEWS.md updated</label></li>
<li><label><input type="checkbox">CRAN comments prepared</label></li>
</ul><hr></div>
<div class="section level4">
<h4 id="id_72-github-actions-cicd">7.2 GitHub Actions CI/CD<a class="anchor" aria-label="anchor" href="#id_72-github-actions-cicd"></a></h4>
<p><strong>Create</strong>: <code>.github/workflows/R-CMD-check.yml</code></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> R-CMD-check</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">,</span><span class="at"> develop</span><span class="kw">]</span></span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span></span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span></span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a><span class="at">  </span><span class="fu">R-CMD-check</span><span class="kw">:</span></span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ${{ matrix.os }}</span></span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a><span class="at">    </span><span class="fu">strategy</span><span class="kw">:</span></span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a><span class="at">      </span><span class="fu">matrix</span><span class="kw">:</span></span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a><span class="at">        </span><span class="fu">os</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">ubuntu-latest</span><span class="kw">,</span><span class="at"> windows-latest</span><span class="kw">,</span><span class="at"> macos-latest</span><span class="kw">]</span></span>
<span id="cb24-16"><a href="#cb24-16" tabindex="-1"></a><span class="at">        </span><span class="fu">r-version</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">'4.1'</span><span class="kw">,</span><span class="at"> </span><span class="st">'4.2'</span><span class="kw">,</span><span class="at"> </span><span class="st">'4.3'</span><span class="kw">,</span><span class="at"> </span><span class="st">'release'</span><span class="kw">]</span></span>
<span id="cb24-17"><a href="#cb24-17" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb24-19"><a href="#cb24-19" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb24-20"><a href="#cb24-20" tabindex="-1"></a></span>
<span id="cb24-21"><a href="#cb24-21" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-r@v2</span></span>
<span id="cb24-22"><a href="#cb24-22" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb24-23"><a href="#cb24-23" tabindex="-1"></a><span class="at">          </span><span class="fu">r-version</span><span class="kw">:</span><span class="at"> ${{ matrix.r-version }}</span></span>
<span id="cb24-24"><a href="#cb24-24" tabindex="-1"></a></span>
<span id="cb24-25"><a href="#cb24-25" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-r-dependencies@v2</span></span>
<span id="cb24-26"><a href="#cb24-26" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb24-27"><a href="#cb24-27" tabindex="-1"></a><span class="at">          </span><span class="fu">extra-packages</span><span class="kw">:</span><span class="at"> any::rcmdcheck</span></span>
<span id="cb24-28"><a href="#cb24-28" tabindex="-1"></a></span>
<span id="cb24-29"><a href="#cb24-29" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/check-r-package@v2</span></span></code></pre></div>
<p><strong>Create</strong>: <code>.github/workflows/test-coverage.yml</code></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> test-coverage</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">,</span><span class="at"> develop</span><span class="kw">]</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a><span class="at">  </span><span class="fu">coverage</span><span class="kw">:</span></span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a></span>
<span id="cb25-16"><a href="#cb25-16" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-r@v2</span></span>
<span id="cb25-17"><a href="#cb25-17" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb25-18"><a href="#cb25-18" tabindex="-1"></a><span class="at">          </span><span class="fu">use-public-rspm</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb25-19"><a href="#cb25-19" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-r-dependencies@v2</span></span>
<span id="cb25-21"><a href="#cb25-21" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb25-22"><a href="#cb25-22" tabindex="-1"></a><span class="at">          </span><span class="fu">extra-packages</span><span class="kw">:</span><span class="at"> any::covr</span></span>
<span id="cb25-23"><a href="#cb25-23" tabindex="-1"></a></span>
<span id="cb25-24"><a href="#cb25-24" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test coverage</span></span>
<span id="cb25-25"><a href="#cb25-25" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> covr::codecov()</span></span>
<span id="cb25-26"><a href="#cb25-26" tabindex="-1"></a><span class="at">        </span><span class="fu">shell</span><span class="kw">:</span><span class="at"> Rscript {0}</span></span></code></pre></div>
<hr></div>
<div class="section level4">
<h4 id="id_73-version-strategy">7.3 Version Strategy<a class="anchor" aria-label="anchor" href="#id_73-version-strategy"></a></h4>
<p><strong>Current</strong>: 2.0.0 <strong>Recommended versioning</strong>:</p>
<p>After Phase 1-2 (bug fixes + tests): - <strong>2.0.1</strong> - Patch release with critical bug fixes</p>
<p>After Phase 3-4 (refactoring + documentation): - <strong>2.1.0</strong> - Minor release with improved documentation</p>
<p>After Phase 5-6 (dependencies + modernization): - <strong>2.2.0</strong> - Minor release with dependency optimization</p>
<p>After Phase 7 (if breaking changes): - <strong>3.0.0</strong> - Major release (only if API changes)</p>
<hr></div>
</div>
</div>
<div class="section level2">
<h2 id="implementation-timeline">Implementation Timeline<a class="anchor" aria-label="anchor" href="#implementation-timeline"></a></h2>
<table class="table"><colgroup><col width="17%"><col width="24%"><col width="34%"><col width="24%"></colgroup><thead><tr class="header"><th>Phase</th>
<th>Duration</th>
<th>Deliverables</th>
<th>Priority</th>
</tr></thead><tbody><tr class="odd"><td>1: Critical Bugs</td>
<td>1 week</td>
<td>Bug fixes (✅ 1/3 resolved via missingmed), typos</td>
<td>CRITICAL</td>
</tr><tr class="even"><td>2: Testing</td>
<td>1 week</td>
<td>Test infrastructure, 70%+ coverage</td>
<td>HIGH</td>
</tr><tr class="odd"><td>3: Refactoring</td>
<td>2 weeks</td>
<td>Utilities extracted, code consolidated</td>
<td>HIGH</td>
</tr><tr class="even"><td>4: Documentation</td>
<td>1 week</td>
<td>Vignettes, enhanced docs</td>
<td>HIGH</td>
</tr><tr class="odd"><td>5: Dependencies</td>
<td>1 week</td>
<td>✅ mice removed, DESCRIPTION optimized</td>
<td>MEDIUM</td>
</tr><tr class="even"><td>6: S7 OOP</td>
<td>2 weeks</td>
<td>S7 classes, print/summary methods</td>
<td>MEDIUM-HIGH</td>
</tr><tr class="odd"><td>7: Release</td>
<td>1 week</td>
<td>CI/CD, final checks</td>
<td>CRITICAL</td>
</tr><tr class="even"><td><strong>Total</strong></td>
<td><strong>9 weeks</strong></td>
<td>Production-ready v2.1.0+</td>
<td></td>
</tr></tbody></table><p><strong>Note</strong>: Phase 5 partially complete (mice dependency removed, missingmed separated)</p>
<hr></div>
<div class="section level2">
<h2 id="success-metrics">Success Metrics<a class="anchor" aria-label="anchor" href="#success-metrics"></a></h2>
<div class="section level3">
<h3 id="code-quality">Code Quality<a class="anchor" aria-label="anchor" href="#code-quality"></a></h3>
<ul><li>✅ 0 critical bugs</li>
<li>✅ Test coverage ≥ 70%</li>
<li>✅ R CMD check: 0 errors, 0 warnings, ≤ 5 notes</li>
<li>✅ Reduced code duplication by 50%</li>
</ul></div>
<div class="section level3">
<h3 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a></h3>
<ul><li>✅ 5 comprehensive vignettes</li>
<li>✅ All exported functions fully documented</li>
<li>✅ Method selection guide</li>
</ul></div>
<div class="section level3">
<h3 id="maintainability">Maintainability<a class="anchor" aria-label="anchor" href="#maintainability"></a></h3>
<ul><li>✅ Modular code structure</li>
<li>✅ Clear internal/external separation</li>
<li>✅ Standardized constants</li>
<li>✅ Reduced file count by 15%</li>
</ul></div>
<div class="section level3">
<h3 id="user-experience">User Experience<a class="anchor" aria-label="anchor" href="#user-experience"></a></h3>
<ul><li>✅ Clearer error messages</li>
<li>✅ Consistent API</li>
<li>✅ Better examples</li>
<li>✅ Integration with missingmed package</li>
<li>✅ Professional print() output (with S7)</li>
<li>✅ Enhanced summary() methods (with S7)</li>
</ul><hr></div>
</div>
<div class="section level2">
<h2 id="risk-mitigation">Risk Mitigation<a class="anchor" aria-label="anchor" href="#risk-mitigation"></a></h2>
<div class="section level3">
<h3 id="risk-1-breaking-changes">Risk 1: Breaking Changes<a class="anchor" aria-label="anchor" href="#risk-1-breaking-changes"></a></h3>
<p><strong>Mitigation</strong>: - Maintain backward compatibility - Use deprecation warnings before removing features - Version appropriately (major bump for breaking changes)</p>
</div>
<div class="section level3">
<h3 id="risk-2-test-development-time">Risk 2: Test Development Time<a class="anchor" aria-label="anchor" href="#risk-2-test-development-time"></a></h3>
<p><strong>Mitigation</strong>: - Start with high-impact functions (medci, ci) - Use published examples as test cases - Incremental coverage increase</p>
</div>
<div class="section level3">
<h3 id="risk-3-dependency-conflicts">Risk 3: Dependency Conflicts<a class="anchor" aria-label="anchor" href="#risk-3-dependency-conflicts"></a></h3>
<p><strong>Mitigation</strong>: - Test on multiple R versions (4.1, 4.2, 4.3, release) - Use GitHub Actions for continuous testing - Document minimum versions clearly</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="post-release-maintenance">Post-Release Maintenance<a class="anchor" aria-label="anchor" href="#post-release-maintenance"></a></h2>
<div class="section level3">
<h3 id="ongoing-tasks">Ongoing Tasks<a class="anchor" aria-label="anchor" href="#ongoing-tasks"></a></h3>
<ol style="list-style-type: decimal"><li>Monitor CRAN check results</li>
<li>Respond to user issues on GitHub</li>
<li>Update for new R versions</li>
<li>Keep dependencies updated</li>
<li>Add new features based on user feedback</li>
</ol></div>
<div class="section level3">
<h3 id="integration-with-missingmed">Integration with missingmed<a class="anchor" aria-label="anchor" href="#integration-with-missingmed"></a></h3>
<ul><li>Document interoperability</li>
<li>Create examples showing joint usage</li>
<li>Consider missingmed as Suggests dependency</li>
<li>Cross-reference in documentation</li>
</ul><hr></div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a></h2>
<p>This 9-week plan transforms RMediation from a functional but technically-debt-laden package into a modern, well-tested, well-documented R package suitable for CRAN submission and long-term maintenance. The phased approach ensures critical issues are addressed first while allowing flexibility in lower-priority enhancements.</p>
<p><strong>Immediate Action Items</strong>: 1. Fix critical bugs (Phase 1) - Can be done in 1 day 2. Set up test infrastructure (Phase 2.1) - Can be done in 1 day 3. Begin writing core tests (Phase 2.2) - Ongoing</p>
<p><strong>Question for Package Maintainer</strong>: - What is your priority: Quick bug fix release vs comprehensive overhaul? - Are breaking changes acceptable for v3.0.0, or must maintain backward compatibility? - Timeline constraints for next CRAN submission?</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://orcid.org/0000-0001-8523-7776" class="external-link">Davood Tofighi</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

